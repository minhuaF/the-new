# Phase 2 åŠŸèƒ½å®æ–½æ€»ç»“

**å®Œæˆæ—¥æœŸ**: 2025-01-16

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. ç½‘é¡µçˆ¬å–åŠŸèƒ½ ğŸŒ

#### å®ç°å†…å®¹

**åç«¯ API**
- æ–‡ä»¶: [src/app/api/extract/route.ts](src/app/api/extract/route.ts:1)
- åŠŸèƒ½:
  - ä½¿ç”¨ `@mozilla/readability` å’Œ `jsdom` æå–ç½‘é¡µå†…å®¹
  - URL æ ¼å¼éªŒè¯
  - è¶…æ—¶å¤„ç†ï¼ˆ10ç§’ï¼‰
  - é”™è¯¯å¤„ç†ï¼ˆç½‘ç»œé”™è¯¯ã€åçˆ¬è™«ã€æå–å¤±è´¥ç­‰ï¼‰
  - è¿”å›æ ‡é¢˜ã€å†…å®¹ã€æ‘˜è¦ã€æ¥æºç½‘ç«™ç­‰ä¿¡æ¯

**å‰ç«¯é›†æˆ**
- æ–‡ä»¶: [src/app/(app)/upload/page.tsx](src/app/(app)/upload/page.tsx:1)
- åŠŸèƒ½:
  - Tabs ç»„ä»¶åˆ‡æ¢"ç²˜è´´æ–‡æœ¬"å’Œ"è¾“å…¥é“¾æ¥"
  - URL è¾“å…¥æ¡† + æå–æŒ‰é’®
  - åŠ è½½çŠ¶æ€æç¤ºï¼ˆ"æå–ä¸­..."ï¼‰
  - æå–åè‡ªåŠ¨å¡«å……æ ‡é¢˜å’Œå†…å®¹
  - æ”¯æŒç¼–è¾‘æå–åçš„å†…å®¹
  - é”™è¯¯æç¤ºï¼ˆToastï¼‰

#### æµ‹è¯•ç»“æœ

âœ… **æˆåŠŸæå–** Wikipedia æ–‡ç« ï¼š
- URL: https://en.wikipedia.org/wiki/English_language
- æ ‡é¢˜: "English language"
- å†…å®¹: 140,307 ä¸ªå­—ç¬¦
- ç•Œé¢æµç•…ï¼Œæå–é€Ÿåº¦å¿«

âœ… **é”™è¯¯å¤„ç†æ­£å¸¸**:
- 404 é¡µé¢æ˜¾ç¤ºå‹å¥½é”™è¯¯æç¤º
- URL æ ¼å¼éªŒè¯æœ‰æ•ˆ

#### ä¾èµ–åŒ…

```json
{
  "@mozilla/readability": "^0.5.0",
  "jsdom": "^23.0.1",
  "@types/jsdom": "^latest" (devDependencies)
}
```

---

### 2. åˆ†äº«åŠŸèƒ½ ğŸ¨

#### å®ç°å†…å®¹

**åˆ†äº«å¡ç‰‡æ¨¡æ¿ç»„ä»¶**

1. **å•è¯å¡æ¨¡æ¿** - [src/components/share-templates/WordCardTemplate.tsx](src/components/share-templates/WordCardTemplate.tsx:1)
   - å°ºå¯¸: 1080x1080ï¼ˆInstagram Postï¼‰
   - å†…å®¹: å•è¯ + éŸ³æ ‡ + é‡Šä¹‰
   - æ”¯æŒ 5 ç§ä¸»é¢˜
   - æ˜¾ç¤ºå“ç‰Œ Logo å’ŒäºŒç»´ç 

2. **ç¬”è®°å¡æ¨¡æ¿** - [src/components/share-templates/NoteCardTemplate.tsx](src/components/share-templates/NoteCardTemplate.tsx:1)
   - å°ºå¯¸: 1080x1920ï¼ˆInstagram Storyï¼‰
   - å†…å®¹: çŸ­è¯­ + ä¸Šä¸‹æ–‡ + ç”¨æˆ·ç¬”è®° + AI å»ºè®®
   - ä¾¿ç­¾çº¸é£æ ¼è®¾è®¡

3. **å­¦ä¹ æ€»ç»“æ¨¡æ¿** - [src/components/share-templates/LearningSummaryTemplate.tsx](src/components/share-templates/LearningSummaryTemplate.tsx:1)
   - å°ºå¯¸: 1200x630ï¼ˆTwitter Cardï¼‰
   - å†…å®¹: é˜…è¯»æ–‡ç« æ•°ã€æ ‡æ³¨å•è¯æ•°ã€å­¦ä¹ å¤©æ•°ã€å­¦ä¹ æ—¶é•¿
   - æ¸å˜èƒŒæ™¯ + ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼å¸ƒå±€

**åˆ†äº«å¯¹è¯æ¡†ç»„ä»¶**
- æ–‡ä»¶: [src/components/ShareDialog.tsx](src/components/ShareDialog.tsx:1)
- åŠŸèƒ½:
  - æ¨¡æ¿é€‰æ‹©ï¼ˆTabsï¼šå•è¯å¡/ç¬”è®°å¡/å­¦ä¹ æ€»ç»“ï¼‰
  - ä¸»é¢˜åˆ‡æ¢ï¼ˆ5 ç§é¢„è®¾ä¸»é¢˜ï¼‰
  - å®æ—¶é¢„è§ˆï¼ˆç¼©æ”¾æ˜¾ç¤ºï¼‰
  - å›¾ç‰‡ç”Ÿæˆå’Œä¸‹è½½
  - å“åº”å¼å¸ƒå±€

**ä¸»é¢˜ç³»ç»Ÿ**

æ”¯æŒ 5 ç§é…è‰²ä¸»é¢˜:
1. **æ¸…æ–°è“** (é»˜è®¤) - è“è‰² â†’ ç´«è‰²æ¸å˜
2. **æ¸©æš–æ©™** - æ©™è‰² â†’ é»„è‰²æ¸å˜
3. **è‡ªç„¶ç»¿** - ç»¿è‰² â†’ ç¿ ç»¿æ¸å˜
4. **ä¼˜é›…ç´«** - ç´«è‰² â†’ ç²‰è‰²æ¸å˜
5. **ç®€çº¦ç°** - ç°è‰² â†’ çŸ³æ¿ç°æ¸å˜

**å›¾ç‰‡ç”Ÿæˆå·¥å…·**
- æ–‡ä»¶: [src/lib/share.ts](src/lib/share.ts:1)
- åŠŸèƒ½:
  - `generateImage()`: å°† HTML å…ƒç´ è½¬ä¸ºå›¾ç‰‡
  - `downloadImage()`: ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°
  - `generateAndDownload()`: ç”Ÿæˆå¹¶ä¸‹è½½
  - `uploadShareImage()`: ä¸Šä¼ åˆ° Supabase Storageï¼ˆé¢„ç•™ï¼‰

**UI é›†æˆ**
- åœ¨æ–‡ç« è¯¦æƒ…é¡µ [src/app/(app)/articles/[id]/page.tsx](src/app/(app)/articles/[id]/page.tsx:1) æ·»åŠ "åˆ†äº«"æŒ‰é’®
- ç‚¹å‡»æŒ‰é’®æ‰“å¼€åˆ†äº«å¯¹è¯æ¡†
- æ”¯æŒé€‰æ‹©æ¨¡æ¿ã€åˆ‡æ¢ä¸»é¢˜ã€é¢„è§ˆå’Œä¸‹è½½

#### æŠ€æœ¯æ ˆ

```json
{
  "html-to-image": "^1.11.11",  // HTML è½¬å›¾ç‰‡
  "qrcode.react": "^3.1.0",     // äºŒç»´ç ç”Ÿæˆ
  "@types/qrcode.react": "^latest" (devDependencies)
}
```

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | è®¡åˆ’ | å®é™…å®Œæˆ | çŠ¶æ€ |
|------|------|----------|------|
| **ç½‘é¡µçˆ¬å–** | | | |
| URL è¾“å…¥ç•Œé¢ | âœ… | âœ… | å®Œæˆ |
| Readability.js æå– | âœ… | âœ… | å®Œæˆ |
| é”™è¯¯å¤„ç† | âœ… | âœ… | å®Œæˆ |
| Chrome æ‰©å±• | âšª (å¤‡é€‰) | âŒ | æœªå®æ–½ |
| **åˆ†äº«åŠŸèƒ½** | | | |
| å•è¯å¡æ¨¡æ¿ | âœ… | âœ… | å®Œæˆ |
| ç¬”è®°å¡æ¨¡æ¿ | âœ… | âœ… | å®Œæˆ |
| å­¦ä¹ æ€»ç»“æ¨¡æ¿ | âœ… | âœ… | å®Œæˆ |
| ä¸»é¢˜å®šåˆ¶ (5ç§) | âœ… | âœ… | å®Œæˆ |
| å›¾ç‰‡ç”Ÿæˆä¸‹è½½ | âœ… | âœ… | å®Œæˆ |
| ç¤¾äº¤åª’ä½“åˆ†äº« | âšª | âŒ | æœªå®æ–½ |
| Supabase å­˜å‚¨ | âšª | ğŸ”§ | å·²é¢„ç•™æ¥å£ |

---

## ğŸ“ æ–°å¢æ–‡ä»¶æ¸…å•

### API è·¯ç”±
- `src/app/api/extract/route.ts` - ç½‘é¡µå†…å®¹æå– API

### ç»„ä»¶
- `src/components/ShareDialog.tsx` - åˆ†äº«å¯¹è¯æ¡†ä¸»ç»„ä»¶
- `src/components/share-templates/WordCardTemplate.tsx` - å•è¯å¡æ¨¡æ¿
- `src/components/share-templates/NoteCardTemplate.tsx` - ç¬”è®°å¡æ¨¡æ¿
- `src/components/share-templates/LearningSummaryTemplate.tsx` - å­¦ä¹ æ€»ç»“æ¨¡æ¿

### å·¥å…·åº“
- `src/lib/share.ts` - å›¾ç‰‡ç”Ÿæˆå·¥å…·å‡½æ•°

### UI ç»„ä»¶
- `src/components/ui/tabs.tsx` - Tabs ç»„ä»¶ï¼ˆshadcn/uiï¼‰

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### ç½‘é¡µçˆ¬å–åŠŸèƒ½

**ä½¿ç”¨æµç¨‹**:
1. è®¿é—® `/upload` é¡µé¢
2. åˆ‡æ¢åˆ°"è¾“å…¥é“¾æ¥" Tab
3. ç²˜è´´æ–‡ç«  URLï¼ˆå¦‚: https://en.wikipedia.org/wiki/English_languageï¼‰
4. ç‚¹å‡»"æå–æ–‡ç« "æŒ‰é’®
5. ç³»ç»Ÿè‡ªåŠ¨æå–æ ‡é¢˜å’Œå†…å®¹
6. å¯ç¼–è¾‘åç‚¹å‡»"ä¿å­˜æ–‡ç« "

**æµ‹è¯•æˆªå›¾**: `.playwright-mcp/upload-page-test.png`

### åˆ†äº«åŠŸèƒ½

**ä½¿ç”¨æµç¨‹**:
1. æ‰“å¼€æ–‡ç« è¯¦æƒ…é¡µ
2. ç‚¹å‡»å³ä¸Šè§’"åˆ†äº«"æŒ‰é’®
3. é€‰æ‹©æ¨¡æ¿ï¼ˆå•è¯å¡/ç¬”è®°å¡/å­¦ä¹ æ€»ç»“ï¼‰
4. é€‰æ‹©ä¸»é¢˜ï¼ˆ5 ç§é…è‰²ï¼‰
5. é¢„è§ˆæ•ˆæœ
6. ç‚¹å‡»"ä¸‹è½½å›¾ç‰‡"ä¿å­˜åˆ°æœ¬åœ°

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### Phase 2 å‰©ä½™åŠŸèƒ½ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

#### 1. ç¬”è®°åŠŸèƒ½ ğŸ“ (é«˜ä¼˜å…ˆçº§)
- æ‰‹åŠ¨ç¬”è®°ç¼–è¾‘å™¨ï¼ˆLexical å¯Œæ–‡æœ¬ï¼‰
- AI è‡ªåŠ¨ç”Ÿæˆç¬”è®°å»ºè®®
- ç¬”è®°å±•ç¤ºä¸ç®¡ç†
- **é¢„è®¡æ—¶é—´**: 3 å‘¨

#### 4. è®¢é˜…ä¸æ”¯ä»˜ ğŸ’° (ä¸­ä¼˜å…ˆçº§)
- å…è´¹ç‰ˆ/é«˜çº§ç‰ˆåŠŸèƒ½åˆ†å±‚
- Stripe æ”¯ä»˜é›†æˆ
- é¢åº¦é™åˆ¶ç®¡ç†
- **é¢„è®¡æ—¶é—´**: 3 å‘¨

#### 5. çŸ¥è¯†å›¾è°± ğŸ§  (ä½ä¼˜å…ˆçº§)
- React Flow å¯è§†åŒ–
- æ–‡ç« -å•è¯å…³è”å›¾è°±
- æ™ºèƒ½æ¨è
- **é¢„è®¡æ—¶é—´**: 4 å‘¨

#### 6. å¤ä¹ ç³»ç»Ÿ ğŸ“Š (ä½ä¼˜å…ˆçº§)
- SM-2 é—´éš”é‡å¤ç®—æ³•
- é—ªå¡å¤ä¹ æ¨¡å¼
- å­¦ä¹ ç»Ÿè®¡ä¸ç»ƒä¹ 
- **é¢„è®¡æ—¶é—´**: 3 å‘¨

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

1. **Readability.js é›†æˆ**
   - æ™ºèƒ½æå–æ–‡ç« ä¸»ä½“å†…å®¹
   - è¿‡æ»¤å¹¿å‘Šå’Œæ— å…³å…ƒç´ 
   - æ”¯æŒå¤§å¤šæ•°ä¸»æµç½‘ç«™

2. **html-to-image å›¾ç‰‡ç”Ÿæˆ**
   - é«˜è´¨é‡ PNG/JPEG è¾“å‡º
   - 2å€åƒç´ æ¯”ï¼ˆRetina å±å¹•ä¼˜åŒ–ï¼‰
   - ç¦»å±æ¸²æŸ“é¿å…è§†è§‰é—ªçƒ

3. **å“åº”å¼é¢„è§ˆ**
   - CSS transform ç¼©æ”¾é¢„è§ˆ
   - éšè—å…¨å°ºå¯¸æ¨¡æ¿ç”¨äºç”Ÿæˆ
   - æµç•…çš„ç”¨æˆ·ä½“éªŒ

4. **ä¸»é¢˜ç³»ç»Ÿ**
   - ç»Ÿä¸€çš„é…è‰²æ–¹æ¡ˆ
   - æ˜“äºæ‰©å±•æ–°ä¸»é¢˜
   - å®æ—¶åˆ‡æ¢é¢„è§ˆ

---

## ğŸ“ å¤‡æ³¨

- åˆ†äº«åŠŸèƒ½çš„ç¤¾äº¤åª’ä½“ä¸€é”®åˆ†äº«éœ€è¦å„å¹³å° API é›†æˆï¼Œæš‚æœªå®æ–½
- Chrome æ‰©å±•ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆï¼Œå½“å‰æœåŠ¡ç«¯æ–¹æ¡ˆå·²æ»¡è¶³éœ€æ±‚
- Supabase Storage ä¸Šä¼ æ¥å£å·²é¢„ç•™ï¼Œéœ€è¦æ—¶å¯å¯ç”¨

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-16
